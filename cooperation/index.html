<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">

    <title>Cooperation</title>
</head>

<body>
    <div id="wrapper">
        <img src="./images/dora-g.png" alt="dora" id="dora">
        <img src="./images/logosheet.png" alt="logos" class="logos">
    </div>
    <canvas id="tie1"></canvas>
    <script>
        //定制要打印的文字数组
        var str = [];
        // str = "010101010101";
        str = " DORAHACKS ";
        var canvas = document.getElementById("tie1");
        var ctx = canvas.getContext("2d");
        var s = window.screen;
        var w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        var h = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
        // var w = window.innerWidth;
        // var h = window.innerHeight;
        canvas.width = w;
        canvas.height = h;
        var fontSize = w > 500 ? 15 : 8;
        var clos = Math.floor(w / fontSize);
        ctx.font = "600 " + fontSize + "px 微软雅黑";
        //申明一个数组
        var s = [];
        for (var i = 0; i < clos; i++) {
            s.push(0);
        }

        function getRandomColor() {
            var c = '#';
            var cArray = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'];
            for (var i = 0; i < 6; i++) {
                var cIndex = Math.round(Math.random() * 15);
                c += cArray[cIndex];
            }
            return c;
        }

        window.addEventListener("resize", resizeCanvas, false);

        function resizeCanvas() {
            w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
            h = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
            canvas.width = w;
            canvas.height = h;
            clos = Math.floor(w / fontSize);
            fontSize = w > 500 ? 15 : 8;
        }

        function draw() {
            ctx.fillStyle = "rgba(0,0,0,0.05)";
            ctx.fillRect(0, 0, w, h);
            // ctx.fillStyle = getRandomColor();
            ctx.fillStyle = '#F26F21';
            // for (var i = 0; i < clos; i++) {
            //     var y = s[i] * fontSize;
            //     // ctx.fillText(str[Math.floor(Math.random() * str.length)], i * fontSize, y);
            //     ctx.fillText(str[s[i] % 10], i * fontSize * 2, y);
            //     if (y >= canvas.height && Math.random() > 0.99) {
            //         s[i] = 0;
            //     }
            //     s[i]++;
            // }
            for (var i = 0; i < clos; i++) {
                var y = s[i] * fontSize;
                // ctx.fillText(str[Math.floor(Math.random() * str.length)], i * fontSize, y);
                if (s[i] === 0) {
                    if (Math.random() > 0.99) {
                        ctx.fillText(str[s[i] % 11], i * fontSize * 3, y);
                        s[i]++;
                    }
                } else {
                    ctx.fillText(str[s[i] % 10], i * fontSize * 3, y);
                    if (y >= canvas.height && Math.random() > 0.99) {
                        s[i] = 0;
                    }
                    s[i]++;
                }
            }
        }
        setInterval(draw, 50);
    </script>
</body>

</html>